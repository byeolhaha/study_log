# 9.1 보안
- 정보 보안이란
  우리가 생산하거나 유지해야 할 정보에 위험이 발생하거나 사고나 날 염려 없이 편안한 상태를 유지하는 것
- 3대 요소
  - 기밀성 : 인가되지 않은 사용자에게 정보를 보여주지 않는 것
  - 무결성 : 정확하고 완정한 정보를 유지하는 것 -> 대표적 무결성 기술 md5, sha
  - 가용성 : 정보가 필요할 때 정보 접근을 허용하는 것
- 네트워크 보안의 주요 개념
  - 트러스트 네트워크 : 우리가 운영하는 내부 네트워크로 보호해야할 영역 
  - 언트러스트 네트워크 : 외부에서 운영하는 네트워크로 믿을 수 없는 영역
  - DMZ :  우리가 운영하는 내부 네트워크이지만 신뢰할 수 없는 외부에게 개방해야하는 영역
- 트래픽의 방향과 용도에 따라
  - 인터넷 시큐어 게이트웨이 : 트러스트(혹은 DMZ)에서 언트러스트 네트워크 통신을 통제
  - 데이터 센터 시큐어 게이트웨이 : 언트러스트 네트워크에서 트러스트(DMZ) 네트워크 통신을 통제
- 네트워크 보안 정책 수립에 따라
  - 화이트리스트 :  말그대로 허용할 네트워크 설정
  - 블랙리스트 :  허용하지 않을 네트워크 설정

# 9.2 보안 솔루션의 종류
- 해커들의 공격이 악랄해지고 발전하기 때문에 기존 장비에 계속 추가되는 형태
- 형태 : DDOS 방어장비 - 방화벽 - IPS(시그니처) - 웹 방화벽(WAF) - 서버
## DDoS 방어장비
- Dos 공격은 하나의 IP에서 지속적으로 공격하기 때문에 IP 주소 기반 방어가 가능하나 DDoS 공격은 이런 탐지를 회피하기 위해서 다수의 봇에서 공격을 한다.
- 이 공격은 볼륨메트릭 공격의 경우 다수의 공격으로 회선을 마비시키기 때문에 이를 막기위한 장비는 데이터 센터와 외부 네트워크 사이에 존재한다.
## 방화벽
- 4계층에서 동작하는 패킷 필터링 장비
- 비교적 간단하게 동작
## IDS(Instrustion Detection System), IPS(Instrustion Prevetion System)
- 방화벽에서 방어할 수 없는 다양한 애플리케이션 공격을 방어하는 장비
- 공격 데이터베이스를 제조사나 위협 인텔리젼스 서비스 업체로부터 받아서 이 데이터베이스 기반으로 블랙리스트 기반의 방어 방식을 제공받는다.
- 최근에는 화이트리스트 기반으로도 작동할 수 있다고 한다.

## WAF(Web Application Firewall)
-  웹 서버를 보호하는 전용 보안 장비, HTTP, HTTPS처럼 웹 서버에서 동작하는 웹 프로토콜 공격을 방어
-  IDS.IPS 장비보다 범용성이 떨어지지만 HTTP, HTTPS와 같은 웹 프로토콜에 대해서는 더 세밀히 방어
-  WAF는 IPS에서 방어할 수 없는 IPS 회피 공격을 방어할 수 있다.
-  IPS는 데이터를 조합하지 않고 처리하지만 WAF는 프록시 서버와 같이 패킷을 데이터 형태로 조합해서 처리 -> 그래서 회피 공격을 쉽게 만들기 어렵다
## 샌드박스
- 직접적인 공격이 아닌 악성 코드를 관리자 PC에 우회적으로 심고 이 악성 코드를 이용해서 관리자 PC를 컨트롤하는 방식
- 유명한 웹사이트에 악성코드가 담긴 파일을 올리고 이를 사용자들이 다운로드받도록 해서 악성코드에 감염시킴 이 악성 코드를 다운받은 Pc는 원격제어가 가능하다
- 이 원격제어는 C&C 서버에서 진행한다.
- 기존 방화벽에서는 내부 사용자가 외부 서버로 통신을 정상적으로 시도한 것으로 보이므로 이 공격을 검출하거나 방어할 수 없음
- 그래서 샌드박스는 이러한 공격을 방어하는 대표적인 장비, 악성 코드를 샌드박스 시스템 안에서 직접 실행시킴
- 가상 운영체제 안에서 각종 파일을 직접 실행시키고 그 행동을 모니터링해 그 파일들의 악성 코드 여부를 판별한다.
## NAC(Network Access Control)
- 네트워크에 접속하는 장치를 제어
- 네트워크에 접속할 때 인가된 사용자만 내부망 접속할 수 있도록 인가받기 전이나 승인에 실패한 사용자는 접속할 수 없도록 함
## IP 제어
- NAC 솔루션과 비슷하지만 국내에서는 다른 목적
- 고정 IP 사용을 권고함 -> 금융권에 내려오면서 IP를 할당하고 추적하는 솔루션이 필요, 할당된 IP를 관리하고 나아가 정확히 의도된 IP할당이 아니면 정상적으로 네트워크를 사용하지 못하게 하는 기능
## 접근통제(Bastion Host : 배스천 호스트)
- 서버나 데이터베이스에 대한 직접적인 접근을 막고 작업 추적 및 감사를 할 수 있는 접근 통제 솔루션 개발
- 서버 접근을 위한 모든 통신은 베스턴 호스트를 통해서만 가능
- 서버 호스트의 방화벽에 베스턴 호스트에서 출발한 통신만 허용하고 다른 통신은 모두 방어하도록 설정
## VPN
- 사용자 기반의 VPN 서비스를 제공해주는 장비
# 9.3 방화벽
## 9.3.1 방화벽의 정의
- 네트워크 중간에 위치해 해당 장비를 통과하는 트래픽을 사전에 주어진 정책 조건에 맞추어 허용하거나 차단하는 장비
- 네트워크 3,4 계층에서 동작하며 세션을 인지하는 상태 기반 엔진으로 동작
## 9.3.2 초기 방화벽
- 패킷의 인과 관계를 확인하지 못하고 등록된 정책만으로만 패킷을 필터링 = 스테이트리스 또는 패킷 필터 방화벽
- 5-튜플을 참고하여 설정된 정책과 일치하는지 확인
  - 5튜플은 source port, source ip, destination port, destination ip, protocal no
- 하지만 이 방식은 인터넷 통신과 같이 불특정 다수 기반의 정책을 정의할 때 복잡해진다 왜냐하면 불특정다수이므로 등록할 정책이 무수히 많아진다
- 또한 5튜플 외의 3,4 계층 혜더를 변조해서 공격하면 적절히 방어가 불가능하다.
- 하지만 이 방식은 다른 세대의 방화벽보다 부하가 적고 간단하다
## 9.3.3 상태 기반의 방화벽 SPI 엔진의 방화벽
- 기존 패킷 기반의 방화벽의 한계점을 극복하기 위해 현재 사용하는 방화벽은 세션 기반으로 동작하는 상태 기반 방화벽
- 패킷 기반의 방화벽은 불특정 다수와의 통신이나 양방향을 인지하지 못한다.
- 상태기반은 내부에서 외부로 나갔으면 이는 내부에서 해당 포트와 ip를 허용하다고 보고 반대 방향도 허용함
## 9.3.4 방화벽 동작 방식
![image](https://github.com/user-attachments/assets/6c50714c-2ec7-4135-ba61-155cdb1c2531)

- SPI 엔진을 가진 방화벽은 세션 인지 기능이 있어 단순히 5튜플 조건만 확인하는 것이 아니라 OSI 3,4 계층의 세부적인 필드도 함꼐 확인
- TCP 컨트롤 플래그에 따라 동작 방식이 변하거나 시퀀스와 ACK 번호가 갑자기 변경되는 것을 인지해서 세션 탈취 공격을 일부 방어할 수 있다.
## 9.3.5 ALG
- 방화벽은 3,4 계층에서 동작하지 때문에 애플리케이션 헤더 정보는 인지할 수 없음
- 따라서 FTP와 같은 컨트롤 프로토콜과 데이터 프로토콜이 나눠져 있고 통신 방향이 서로 반대인 경우에는 정상적인 서비스가 불가능할 수 있다.
- FTP 기본 동작 방식
  1. 클라이언트는 랜덤 포트 2000을 통해 서버 커맨드 포트 21에 접속하고 데이토 포트로 사용할 2001번 포트 정보를 서버에 전송한다.
  2. 서버에서 클라이언트 커맨트 포트 21에 응답한다
  3. 서버는 서버의 데이터 포트 20를 클라이언트 데이터 포트 2001에 접속한다.
  4. 클라이언트에서 서버의 데이터 포트에 응답한다
  - 1번과 2번이 커멘트 프로토콜로 클라이언트 -> 서버
  - 3번과 4번이 데이터 프로토콜로 서버 -> 클라이언트
  - 세션 기반으로 동작하는 방화벽은 세션의 방향성으로 방화벽을 설정하기 때문에 방향이 매우 중요하다
  - 데이터 채널은 서버 → 클라이언트 방향으로 이루어지며, 이 과정에서 **클라이언트 포트(2001)**로 연결 요청이 발생한다. 하지만 방화벽은 서버에서 클라이언트로의 역방향 트래픽을 기본적으로 차단한다. 특히 데이터 채널의 포트(2001)는 클라이언트에서 동적으로 지정된 것이기 때문에, 방화벽 설정에 명시적으로 포함되지 않은 경우가 많다. 결과적으로, 데이터 전송이 차단되고 FTP 서비스가 정상적으로 동작하지 않는다.
  - 물론 패시브 모드에서는 데이터 프로토콜이 컨트롤 프로토콜과 방향성이 같아서 문제되지 않는다. 하지만 이를 제공하지 못하는 컴포넌트가 있을 수 있고 이미 개발된 애플리케이션은 바꾸는 것이 불가능할 수도 있다.
- 그래서 방화벽에서 FTP 액티브 모드를 통과시키기 위해서 애플리케이션 프로토콜을 확인하고 필요에 따라 세션을 인지해 포트를 자동을 열어주는 **ALG(Application Layer Gateway)** 기능을 사용한다.
- 이 기능은 PAT(Port Address Translation) 기능이 동작하는 방화벽에서 PAT를 정상적으로 통과하지 못하는 프토토클을 자동을 인지해서 애플리케이션 정보를 변경해주거나 세션 테이블을 만들어주는 작업을 수행한다.
- ALG 기능이 켜진 방화벽을 지날 때 FTP 동작 순서
  1. FTP ALG 기능은 초기 FTP 요청 커멘드를 모니터링한다.
  2. 서버 쪽에서 사용할 데이터 세션에서 사용할 포트를 클라이언트로 알려줄 때 이 정보를 확인하고 적절한 세션 정보를 만든다. 서버의 출발지 IP와 포트는 TCP 20번으로, 클라이언트의 IP와 서버에서 알려준 포트를 도착지로 하는 세션을 만들어 세션 테이블을 올린다.
  3. 서버에서 클라이언트로 데이터 세션을 열 때 세션 테이블에 이미 정보가 들어가 있어 정책을 확인하지 않고 패킷이 포워딩된다.
- 하지만 ALG가 프로토콜이 방화벽을 통과하지 못하는 문제의 완벽한 해결책은 아니다. 그래서 대부분의 애플리케이션이 이런 방화벽인 NAT(Network Address Translation)을 고려해 개발되고 있고 STUN(Session Traversal Utilities for NAT)과 같은 홀 펀칭 기술들도 많이 발전해 오래된 프로토콜을 제외하면 ALG 기능을 사용하지 않는 추세이다.
- STUN에 대해서 더 자세히 알아보았다.
  ![image](https://github.com/user-attachments/assets/de86e1f2-7b4d-43ed-bf26-6bbc2487e002)
  - 서버는 본인의 private ip는 알아도 public ip는 알지 못한다. 이는 서버 앞에 있는 NAT를 통과해서 변환되기 때문이다. 그래서 자신의 public ip를 알기 위해서 Stun 서버에 요청을 보내 응답을 통해 알아낸다.
  - 근데 이 기술이 왜 필요한지 알아보니 WebRTC 통신을 위해서는 Peer to Peer 통신이 필요한데 NAT를 이용하면 동일한 Public IP를 사용할 수 없기 때문이라고 한다.
- UDP 홀 펀칭 기술에 대해서도 자세히 알아보았다.
  - 이 기술도 Peer to Peer 통신을 위해 만들어진 기술인데 결론적으로 서로 직접 통신을 위해서는 나의 public ip와 포트를 상대방에게 알려줘야 하는데 이는 NAT를 거쳐야만 아니까 NAT가 UDP로 홀로 연결된 중개 서버의 해당 private ip와 port에 대해서 어떤 public ip와 port를 가지고 있는지 알려줘야 한다.
  - 이러한 기술을 UDP 홀펀칭 기술이라고 한다.
  - 자세한 설명은 이 블로그를 통해서 보면 좋다. https://cjwoov.tistory.com/5
## 9.3.6 방화벽의 한계
- 방화벽이 많은 곳에서 사용되자 이를 우회하는 다양한 공격 방법이 생겨났다. DDoS도 그중의 하나이다.
- 그리고 방화벽인 3,4 계층을 통해 이루어지기 때문에 많은 한계점이 존재한다. 
- 근본적으로 바이러스를 감지하거나 백도어 인터넷 웜을 방어할 수 없다.
- 취약점의 대부분은 애플리케이션 영역에서 발생하기 때문에 이를 검사하지 못하는 방화벽은 대응이 불가능하고 이 때문에 IPS라는 보안장비가 등장하였다.

### 현대의 방화벽 NGFW(Next Generation FireWall), UTM(Unified Threat Management Firewall) 
- 애플리케이션 영역까지 확장한 보안장비
- NGFW는 다양한 보안 장비의 기능이 논리적으로 통합되어 있고
- UTM는 물리적인 여러 가지 엔진을 통합해 함께 동작한다.

# 9.4 IPS, IDS
- 애플리케이션 공격은 서비스를 제공하는 시스템 자체의 취약점을 이용하는 경우가 많다.
- 예를 들어 웹 서비스를 제공하려면 TCP 80포트를 외부에 공개해야 하는데 아파치나 IIS 서버의 취역점을 악용한 공격을 방화벽에서 구분해 필터링하고 모니터링 할 수 없다.
- 애플리케이션 계층에서 이루어지는 다양한 공격을 탐지, 방어하기 위해서 IDS와 IPS가 개발되었다.
## 9.4.1 IPS, IDS의 정의
- IDS(Intrusion Detection System -침입 탐지 시스템)의 약자이며 공격자가 시스템을 해킹할 때 탐지를 목적으로 개발된 시스템, 방어보다 탐지에 초점이 맞추어 개발되었다. 공격에 직접 개입해서 방어하는 것이 아니라 트래픽을 복제해서 검토하고 침입 여부를 판별
- IPS(Intrusion Prevetion System - 침입 방지 시스템)의 약자이며 탐지에 초점을 맞춘 IDS보다 공격이 발견되면 직접 차단한다. 트래픽을 검토만 하는 것이 아니라 인라인 사에 장비를 배치한다. 네트워크와 호스트 기반의 IPS가 있는데 트랜드에 따라 사용하는 것이 다르며 이 책에서는 네트워크 기반의 IPS를 설명한다.
## 9.4.2 IPS, IDS의 동작방식
- 기본적으로 IPS는 공격 데이터베이스를 사용한 패턴 방식으로 운영되지만 프로토콜 어노말리, 프로파일 어노말리 등의 다른 기법으로 공격을 방어한다.
### 9.4.2.1 패턴 매칭 방식
- 말 그래도 공격에 대한 데이터베이스를 가지고 있어서 여기에서 패턴을 매칭에서 해당 요청이 공격이 맞는지 확인한다.
- 패턴 매칭은 공격 데이터베이스를 최대한 신속히 반영해서 계속 최신화가 되어져 있는 것이 중요하다.
### 9.4.2.2 어노말리 공격 방어
- 패턴 매칭은 앞서 말했듯이 데이터베이스 기반이기 때문에 최신화가 중요한데, 이는 극미한 변화만 생겨도 적절한 대응이 불가능하며 빠르게 변화하는 공격을 계속 최신화시켜 반영하기가 어렵다.
- 그래서 분명한 공격으로 파악되지 않더라고 특정 기준 이상의 행위를 하면 이상하다고 판단하고 방어하는 것이 어노말리 공격 방어이다.
- 크게 프로파일 어노말리와 프로토콜 어노말리로 나뉜다.
  - 프로파일 어노말리
    - 평소 관리자가 정해놓은 기준이나 IPS 장비를 모니터링 해 정해진 기준과 다른 행위가 일어나면 공격으로 판단한다.
    - 예를 들어 프린트 서버에 FTP 패킷이 전송되는 경우, 평소는 1MB 이하의 트래픽이 발생하던 시스템에서 수십 MB 이상의 트래픽이 발생하면 감염되었다고 판단하고 공격을 방어한다.
  - 프로토콜 어노말리
    - 방화벽을 우회하기 위해서 내부 사용자가 직접 악성 코드를 다운로드 받도록하고 C&C 서버에 요청을 보내기 때문에 방화벽 우회가 가능해진다.
    - 이 경우 감염된 내부 PC가 외부와 공격을 위한 통신을 할 때는 잘 알려진 서비스 포트를 사용하지만 실제 해당 서비스 포트에서 동작하는 프로토콜이 아닌 다른 프로토콜을 사용하는 경우가 흔하며 이 경우 공격을 의심해 볼 수 있다.
    - 즉 잘 알려진 포트와 실제로 통신하는 프로토콜이 다를 때 이것을 파악해 적절히 제어하는 기법을 프로토콜 어노말리라고 한다.
## 9.4.3 IDS, IPS의 한계와 극복 NGIPS
- IDS와 IPS는 네트워크 사에서 빠른 속도로 애플리케이션 레벨까지 확인하기 위해 플로 엔진을 사용하는데 이 플로엔진은 패킷을 모아 데이터 형태로 변환해서 검사하는 것이 아니라 패킷이 흘러가는 상황을 모니터링해 공격을 탐지해서 IPS 장비를 비교적 쉽게 우회할 수 있다.
- 1. **플로 엔진이 IPS를 우회할 수 있다는 의미**
    - *IPS(침입방지시스템)**는 패킷을 **모아 재조립**하고, 그 내용을 검사해 공격을 탐지합니다.예를 들어, 여러 개로 쪼개진 패킷(fragmented packets)을 모아 하나의 완전한 데이터로 분석합니다.
    - 하지만 **플로 엔진은 패킷을 모아서 분석하지 않기 때문에** 이런 방식으로 탐지하는 **IPS를 우회할 수 있다**는 의미입니다.
    - 즉, 공격자가 **패킷을 나눠 보내는 방식(패킷 분할)**으로 IPS를 속이는 기법이 존재하는데,플로 엔진은 패킷 자체를 조립해 분석하지 않으므로 이런 우회 방식에 취약할 수 있습니다.
2. **왜 IPS보다 취약할까?**
    - **IPS**는 **패킷을 모두 조립**해 공격을 감지하지만,**플로 엔진**은 **흐름(flow)만 감지**하기 때문에 **세부적인 데이터는 놓칠 수 있다**는 취약점이 있습니다.
    - 공격자가 정상적인 흐름처럼 보이도록 **패킷을 나눠 보내거나 중간에 조작**하면,플로 엔진은 이를 **정상적인 트래픽으로 착각할 수 있다**는 것이 문장의 요점입니다.
- 따라서 오탐이 자주 발생하고 초기 설치된 환경에 튜닝하는 작업이 오래 걸리며 지속적으로 관리가 필요하다. 그리고 초반에는 너무 많은 오탐과 알림 때문에 장비가 공격을 정상적으로 방어하지 못하거나 정상적인 서비스도 차단될 수 있다.
- 그래서 최근에는 향상된 NGIPS가 나왔다고 한다.

# 9.5 DDoS 방어 장비
- 기존 공격은 직접 공격해 관리자 권한을 탈취하는 것에 초점이 맞추어져 있었다면 방화벽 대중화 이후의 공격은 정상적인 서비스가 불가능하도록 방해하는 것에 초점이 맞추어져 있다.
- DoS는 한명의 해커가 단족으로 하나의 서비스를 불가능하게 하는 것이지만 제한이 많이 많아 다수의 공격자들을 만들어 동시에 DoS를 하는 분산형 DoS인 DDoS 공격방식으로 발전했다.
- 그래서 이를 방어하기 위해 DDoS 전용 장비가 등장했다.
## 9.5.1 DDoS 방어 장비의 정의
- 초기 DDoS 공격은 시스템이나 네트워크 장비의 취약점이 타킷이 경구가 많았다.
- 단순한 서버 공격에서 네트워크 장비나 DNS 서비스와 같이 인프라 기반 서비스 제공 영역가지 DDoS 공격이 확대되었다.
- DDoS 방어장비는 볼륨메트릭 공격을 방어하기 위해 트래픽 프로파일링 기법을 주로 사용하고 인터넷의 다양한 공격 정보를 수집한 데이터베이스를 활용하기도 한다.
## 9.5.2 DDoS 방어 장비 동작 방식
- 클라우드 서비스, 회선 사업자의 방어 서비스, 해당 방어 장비를 사내에 설치하는 방법이 있다.
- 회선 사업자와 DDoS 방어 장비를 이원화해 협조하는 서비스도 많이 등장한다.
- 또한 탐지와 방어 장비를 구분하는 경우도 있다. DDoS 공격을 탐지해 공격을 수행하는 IP 리스트를 넘겨주면 방어장비나 ISP 내부에서 이 IP를 버리는 것이 가장 흔한 DDoS 방어 기법이다.
- DDoS 장비가 DDoS 여부를 판별하는 방식
  - 프로파일링 기법
    - 평소 데이터 흐름을 습득해 일반적인 대역폭, 세션량, 초기 접속량, 프로토콜별 사용량 등을 저장한다.
    - 이렇게 습득한 데이터와 일치하지 않은 과도한 트래픽이 인입되면 알려주고 차단한다.
    - 습득한 데이터는 다양한 날짜 범위와 다양한 요소를 모니터링한다.
  - 보안 데이터베시으를 기반으로 방어하는 기법
    - IP 평판 데이터베이스를 공유해 DDoS 공격으로 사용된 IP 기반으로 방어 여부를 결정하거나 특정 공격 패턴을 방어하는 방법
## 9.5.3 DDoS 공격 타입
- 볼류메트릭 공격 : 회선 사용량을 가득 채우는 방법
  - 대용량의 트래픽을 사용해 공격 대상의 대역폭을 포화시키는 공격, 간단한 증폭 기술을 사용해 생성하기 쉽다.
  - 쓸모없는 패킷이 회선을 모두 차지해 정상적인 서비스 트래픽이 통과할 수 없다.
  - NTP 증폭, DNS 증폭, TCP 플러드, UDP 플러드
- 프로토콜 공격 : 3,4 계층의 취약점과 리소스 고갈을 노리는 공격
  - 공격 대상이나 중간 위험 리소스의 처리 용량을 모두 사용해 서비스 중단을 유발한다. 일반적인 네트워크 장비나 네트워크 보안 장비를 대상으로 하는 경우가 많다. 공격 대상 장비의 CPU, 메모리 자원을 고갈시켜 정상적인 서비스가 불가능하게 한다.
  - Syn 플러드, Ping of Death
- 애플리케이션 공격 : 애플리케이션 취약점을 노리는 공격
  - 가장 정교한 공격 및 식별
  - 대상과의 연결을 설정한 후 프로세스와 트랜잭션을 독저해 서버 자원을 소모시킴, 애플리케이션 프로토콜 자체의 취약점이나 서비스를 제공하는 플랫폼의 취약점을 악용하는 경우가 많다.
  - HTTP 플러드, DNS 서비스 공격
## 9.5.4 볼류메트릭 공격
- 회선 사용량이나 그 이상의 트래픽을 과도하게 발생시켜 회선을 사용하지 못하도록 방해하는 공격
- 회선을 공급해주는 ISP 내부나 사용자 네트워크 최상단에 위치시켜 이 공격을 완화해야 한다.
- DDoS 장비는 주로 볼류메트릭 공격이나 프로토콜 공격을 방어하는 데 사용된다.
- 혼자 방어할 수 없는 공격도 많아 회선을 공급하는 ISP와 공조해 방어할 필요가 있다.

### 9.5.4.1 좀비 PC를 이용한 볼류메트릭 공격
- 특정 시간에 특정 타깃을 공격하는 형태로 발생한다.
- 이런 공격을 하려면 미리 악성 코드에 감염되어 있는 해커가 컨트롤 할 수 잇는 좀비 PC를 미리 많이 확보하고 C&C 서버를 통해서 원격제어를 통해서 공격 대상 서비스에 공격한다.
- 하지만 미리 많은 좀비 PC를 확보하지 못할 수도 있어서 증폭 공격을 하기도 한다.
  - 증폭 공격은 공격자가 상대적으로 적은 대역폭으로 중간 리플렉터에 패킷을 보내면 이 트래픽을 증복되어 피해자 네트워크에 수십에서 수백 배의 공격 트래픽이 발생하는 공격법이다
- 따라서 이런 볼류메트릭 공격을 방어하는 DDoS 장비를 보유하는 것도 중요하지만 혼자서는 방어가 대부분 불가능해서 ISP를 통한 방어가 클라우드 DDoS 솔루션을 통해 서비스 네트워크로 직접 도달하지 못하도록 해야 한다.

# 9.6 VPN
- VPN으로 우회한다는 것은 무슨 말일까? 암호화한 것을 어떻게 해당 서버가 복호화를 할 수 있다는 것인가? VPN이 암호화한 내용들을 warnging.co.kr로 차단된 사이트들이 복호화를 할 수 있는건가?
    
    ```jsx
    [내 PC] -----> [VPN 서버 (AWS EC2)] -----> [인터넷 (warning.or.kr 차단 사이트)]
            (암호화)                     (복호화 후 일반 트래픽)    
    
    ```
    
    ### 암호화-복호화 과정의 핵심
    
    - **VPN 서버와 클라이언트 간에는 암호화 키가 공유**됩니다.
    - 클라이언트가 데이터를 보낼 때 **이 키로 데이터를 암호화**하고,VPN 서버는 같은 키로 데이터를 **복호화**할 수 있습니다.
    - **이 방식 덕분에 외부(ISP, 해커, 정부 기관)는 트래픽을 볼 수 없고**,오직 VPN 서버만 해당 트래픽을 복호화할 수 있습니다.
