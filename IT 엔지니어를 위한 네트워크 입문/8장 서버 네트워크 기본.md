# 8ì¥ ì„œë²„ ë„¤íŠ¸ì›Œí¬ ê¸°ë³¸
ì´ë²ˆ ì¥ì—ì„œëŠ” ì„œë²„ ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì— ëŒ€í•´ì„œ ë°°ìš´ë‹¤.
## 8.1 ì„œë²„ì˜ ë„¤íŠ¸ì›Œí¬ ì„¤ì • ë° í™•ì¸
IP ì£¼ì†Œ, ì„œë¸Œë„·, ê²Œì´íŠ¸ì›¨ì´, DNS ì„œë²„ì™€ ê°™ì€ ë„¤íŠ¸ì›Œí¬ í•„ìˆ˜ ì •ë³´ë¥¼ ì–´ë–»ê²Œ ì„¤ì •í•˜ê³  í˜„ì¬ ì„¤ì •ëœ ì •ë³´ë¥¼ ì–´ë–»ê²Œ í™•ì¸í•˜ëŠ”ì§€ ì‚´í´ë³¸ë‹¤.
ë‚˜ëŠ” AWSì˜ Unbuntuì—ì„œ ì‹¤ìŠµì„ ì§„í–‰í•˜ì˜€ë‹¤.
ë²„ì „ì€ ì•„ë˜ì™€ ê°™ë‹¤.
```
lsb_release -a

No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 24.04 LTS
Release:        24.04
Codename:       noble
```
### ì„œë²„ ë„¤íŠ¸ì›Œí¬
- ì¸í„°í˜ì´ìŠ¤ ì„¤ì • ê´€ë ¨
```
ubuntu@ip:/etc/netplan$ sudo cat 50-cloud-init.yaml 
# This file is generated from information provided by the datasource.  Changes
# to it will not persist across an instance reboot.  To disable cloud-init's
# network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    ethernets:
        enX0:
            dhcp4: true
            dhcp6: false
            match:
                macaddress: 02:ae:1d:18:1c:2f
            set-name: enX0
    version: 2
```
  - ì‚¬ìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ëŠ” enX0ì´ë‹¤
  - ë¶€íŒ… ì‹œ ì‚¬ìš©í•˜ëŠ” í”„ë¡œí† ì½œì€ dhcp4ì´ë©° ì§€ì •í•  ìˆ˜ ìˆëŠ” ì„¤ì •ì€ none, staticì´ ìˆë‹¤.
  - noneìœ¼ë¡œ ì„¤ì •í•  ê²½ìš° BOOTPë¥¼ ì‚¬ìš©í•˜ê³ , ê´€ë¦¬ìê°€ ê³ ì • IPë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•ŒëŠ” staticì´ë‹¤.
  - ë¶€íŒ… ì‹œ í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œì„±í™” ìƒíƒœë¡œ ì‚¬ìš©í•  ê²ƒì¸ì§€ëŠ” `optional` ì„¤ì •ìœ¼ë¡œ í•  ìˆ˜ ìˆë‹¤.
    1. optional: false (ê¸°ë³¸ê°’, ì¸í„°í˜ì´ìŠ¤ í•„ìˆ˜)
    ```
     network:
      version: 2
      ethernets:
        enX0:
          dhcp4: true
          optional: false  # ë¶€íŒ… ì‹œ ì¸í„°í˜ì´ìŠ¤ ì—†ìœ¼ë©´ ì§€ì—° (ê¸°ë³¸ê°’)
    ```
    ì„œë²„ê°€ ì¬ë¶€íŒ…ë  ë•Œ, enX0 ì¸í„°í˜ì´ìŠ¤ê°€ ì—°ê²°ë˜ì§€ ì•Šìœ¼ë©´ ë¶€íŒ…ì´ ë©ˆì¶˜ë‹¤.
    ë¬¼ë¦¬ì  NICê°€ ì—†ëŠ” ê°€ìƒ ë¨¸ì‹ ì´ë‚˜, ë„¤íŠ¸ì›Œí¬ ì¼€ì´ë¸”ì´ ë½‘í˜€ìˆë‹¤ë©´ ë¶€íŒ…ì´ ì§€ì—°ëœë‹¤.
    
    2. optional: true (ì¸í„°í˜ì´ìŠ¤ ì—†ì–´ë„ ë¶€íŒ…)
    ```
     network:
      version: 2
      ethernets:
        enX0:
          dhcp4: true
          optional: true  # ì¸í„°í˜ì´ìŠ¤ê°€ ì—†ì–´ë„ ë¶€íŒ…
    ```
    ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ê°€ ì—°ê²°ë˜ì§€ ì•Šì•„ë„ ë¶€íŒ…ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œëœë‹¤.
    ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ë‚˜ì¤‘ì— ë³µêµ¬ë˜ì–´ë„ ë¬¸ì œì—†ë‹¤.
    - ğŸš¨ ì„œë²„ì—ì„œ ì™œ ì¤‘ìš”í• ê¹Œ?
    ì„œë²„ í™˜ê²½ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤
    ë°ì´í„°ì„¼í„°ë‚˜ í´ë¼ìš°ë“œì—ì„œ ì„œë²„ê°€ ë¶€íŒ…ë  ë•Œ, ë„¤íŠ¸ì›Œí¬ê°€ ì—†ìœ¼ë©´
    ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.
    ë”°ë¼ì„œ, optional: falseëŠ” ì„œë²„ì—ì„œ ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •ëœë‹¤.
    - ğŸ›œ ì¼ë°˜ PC(í´ë¼ì´ì–¸íŠ¸) ë¶€íŒ…ê³¼ ì°¨ì´
    ì¼ë°˜ ë°ìŠ¤í¬í†±(PC)ì´ë‚˜ ë…¸íŠ¸ë¶ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ê°€ ì—°ê²°ë˜ì§€ ì•Šì•„ë„
    ë¶€íŒ…ì´ ë©ˆì¶”ê±°ë‚˜ ì§€ì—°ë˜ì§€ ì•ŠëŠ”ë‹¤.
    ì„œë²„ëŠ” ë„¤íŠ¸ì›Œí¬ ê¸°ë°˜ ì„œë¹„ìŠ¤(ì›¹, DB, API ë“±)ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì—,
    ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ë¶€íŒ… ê³¼ì •ì—ì„œ í•„ìˆ˜ë¡œ ê°„ì£¼ëœë‹¤.
- ë¡œì»¬ DNS ì£¼ì†Œ í™•ì¸
  ```
  cat /etc/resolv.conf
  # This is /run/systemd/resolve/stub-resolv.conf managed by man:systemd-resolved(8).
  # Do not edit.
  #
  # This file might be symlinked as /etc/resolv.conf. If you're looking at
  # /etc/resolv.conf and seeing this text, you have followed the symlink.
  #
  # This is a dynamic resolv.conf file for connecting local clients to the
  # internal DNS stub resolver of systemd-resolved. This file lists all
  # configured search domains.
  #
  # Run "resolvectl status" to see details about the uplink DNS servers
  # currently in use.
  #
  # Third party programs should typically not access this file directly, but only
  # through the symlink at /etc/resolv.conf. To manage man:resolv.conf(5) in a
  # different way, replace this symlink by a static file or a different symlink.
  #
  # See man:systemd-resolved.service(8) for details about the supported modes of
  # operation for /etc/resolv.conf.

  nameserver 127.0.0.53
  options edns0 trust-ad
  search ap-northeast-2.compute.internal
  ```
  - ë¡œì»¬ DNS ì„œë²„ 127.0.0.53, ëª¨ë“  DNS ìš”ì²­ì´ ë¨¼ì € 127.0.0.53ë¡œ ì „ë‹¬ëœ í›„, ì‹¤ì œ DNS ì„œë²„ë¡œ ì „ì†¡ëœë‹¤.
  - search ap-northeast-2.compute.internalëŠ” ap-northeast-2.compute.internalì€ AWS EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ ë‚´ë¶€ ë„ë©”ì¸
- ì„œë²„ ë‚´ë¶€ì— ì„¤ì •ëœ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ì¡°íšŒ
  - ë„¤íŠ¸ì›Œí¬ì—ì„œ ë§í•˜ëŠ” **ì¸í„°í˜ì´ìŠ¤(interface)**ëŠ” ğŸ‘‰ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°ëœ ì¥ì¹˜(ì„œë²„, PC ë“±)ê°€ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” ì¶œì…êµ¬
  - ë¬¼ë¦¬ì ì¸ ë„¤íŠ¸ì›Œí¬ ì¹´ë“œ(ëœ ì¹´ë“œ)ë¿ë§Œ ì•„ë‹ˆë¼, Dockerë‚˜ ê°€ìƒ ë¨¸ì‹ (VM)ì²˜ëŸ¼ ê°€ìƒì˜ ì¸í„°í˜ì´ìŠ¤ë„ ìˆë‹¤.
  - ```ip a```ë¡œ ì „ì²´ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ í™•ì¸ ê°€ëŠ¥, ë‚˜ì˜ ê²½ìš° ë„ì»¤ë¡œ ì„¤ì¹˜í–ˆê¸° ë•Œë¬¸ì— ê°€ìƒ ë¨¸ì‹ ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê°€ìƒ ì¸í„°í˜ì´ìŠ¤ë„ ì¡°íšŒë˜ì—ˆë‹¤. 
- ê²Œì´íŠ¸ì›¨ì´ í™•ì¸
  ```
  /etc/netplan$ ip r
  default via 172.31.0.1 dev enX0 proto dhcp src 172.31.8.116 metric 100 
  172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown 
  172.31.0.0/20 dev enX0 proto kernel scope link src 172.31.8.116 metric 100 
  172.31.0.1 dev enX0 proto dhcp scope link src 172.31.8.116 metric 100 
  172.31.0.2 dev enX0 proto dhcp scope link src 172.31.8.116 metric 100 
  192.168.122.0/24 dev virbr0 proto kernel scope link src 192.168.122.1 linkdown 
  ```
  - default : ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´(ì¸í„°ë„·ìœ¼ë¡œ ë‚˜ê°€ëŠ” ê²½ë¡œ)
  - via 172.31.0.1 : ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ ì£¼ì†ŒëŠ” 172.31.0.1ì…ë‹ˆë‹¤.
  - dev enX0 : ì´ ë„¤íŠ¸ì›Œí¬ëŠ” enX0 ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì—°ê²°ë©ë‹ˆë‹¤.
  - src 172.31.8.116 : í˜„ì¬ enX0 ì¸í„°í˜ì´ìŠ¤ì˜ IP ì£¼ì†ŒëŠ” 172.31.8.116ì…ë‹ˆë‹¤.
  - docker0 : Dockerì—ì„œ ìƒì„±í•œ ê¸°ë³¸ ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤.
  - 172.17.0.1 : Dockerê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” IP ì£¼ì†Œì…ë‹ˆë‹¤.
  - linkdown : í˜„ì¬ Docker ë„¤íŠ¸ì›Œí¬ëŠ” ë¹„í™œì„±í™” ìƒíƒœì…ë‹ˆë‹¤. ğŸ’¡ ì˜ë¯¸: Docker ì»¨í…Œì´ë„ˆ ë„¤íŠ¸ì›Œí¬ê°€ êµ¬ì„±ë˜ì–´ ìˆì§€ë§Œ, í˜„ì¬ ë™ì‘ ì¤‘ì¸ ì»¨í…Œì´ë„ˆëŠ” ì—†ëŠ” ìƒíƒœë¡œ ë³´ì…ë‹ˆë‹¤.
  - 172.31.0.0/20 : VPC ë‚´ë¶€ ì„œë¸Œë„· ëŒ€ì—­ì…ë‹ˆë‹¤.
  - enX0 : enX0 ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì—°ê²°ë©ë‹ˆë‹¤.
  - src 172.31.8.116 : ì´ ì¸í„°í˜ì´ìŠ¤ì˜ IPëŠ” 172.31.8.116ì…ë‹ˆë‹¤.
  - ì¶”ê°€ dhcp ê²½ë¡œë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
    - 172.31.0.1 : ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ë¡œ ì„¤ì •ëœ ì£¼ì†Œ
    - 172.31.0.2 : AWSì—ì„œ ì¢…ì¢… ë‚˜íƒ€ë‚˜ëŠ” ì¶”ê°€ ê²½ë¡œë¡œ, VPC ë‚´ DNS ë¦¬ì¡¸ë²„ ì£¼ì†Œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - virbr0 : ê°€ìƒ ë¨¸ì‹ (KVM, VirtualBox ë“±)ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤
  - 192.168.122.1 : ê°€ìƒ ë„¤íŠ¸ì›Œí¬ì—ì„œ í• ë‹¹ëœ ê¸°ë³¸ IPì…ë‹ˆë‹¤.
  - ì´ ê²Œì´íŠ¸ì›¨ì´ì— ëŒ€í•´ì„œ AWS ê´€ì ì—ì„œ í¼ë¸”ë¦¿ ì„œë¸Œë„·ê³¼ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì€ ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´ë¥¼ ë¬´ì—‡ìœ¼ë¡œ ì¡ì„ê¹Œ ê¶ê¸ˆì¦ì´ ìƒê²¼ë‹¤.
    - í”„ë¼ì´ë¹— ì„œë¸Œë„·ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ì— ë°”ë¡œ ì—°ê²°ë˜ì§€ ì•Šê³  NAT ê²Œì´íŠ¸ì›¨ì´ë¥¼ í†µí•´ì„œ ë³¸ì¸ì˜ í”„ë¼ì´ë¹— IPê°€ í¼ë¸”ë¦­ IPë¡œ ë°”ë€Œê³  ë‚˜ì„œ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¥¼ í†µí•´ì„œ ì™¸ë¶€ì™€ í†µì‹ í•œë‹¤.
    - í¼ë¸”ë¦¿ ì„œë¸Œë„·ì€ ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ë¥¼ í†µí•´ì„œ ë°”ë¡œ ì™¸ë¶€ì™€ í†µì‹ í•  ìˆ˜ ìˆë‹¤.
## 8.2 ì„œë²„ì˜ ë¼ìš°íŒ… í…Œì´ë¸”
![image](https://github.com/user-attachments/assets/a1c9078e-d3ce-4553-acb7-e933c80dbf11)
- ë„¤íŠ¸ì›Œí¬ ì–´ëŒ‘í„°ë¥¼ ë‘ ê°œ ì´ìƒ ì‚¬ìš©í•  ë•ŒëŠ” ì—¬ëŸ¬ ê°€ì§€ ê³ ë ¤ì‚¬í•­ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
- ì›¹ìš© í”„í†¤íŠ¸ì—”ë“œ, ë°ì´í„° ì €ì¥ ë° ì²˜ë¦¬ìš© ë°±ì—”ë“œ ë„¤íŠ¸ì›Œí¬ë¥¼ ë³„ë„ë¡œ ë””ìì¸í•˜ëŠ” ê²½ìš°, ì´ëŸ° í˜•íƒœì˜ ë„¤íŠ¸ì›Œí¬ê°€ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
- ì›¹ ì„œë²„ì— ì›¹ ì„œë¹„ìŠ¤ ì œê³µìš© í”„ë¡ íŠ¸ì—”íŠ¸ ë„¤íŠ¸ì›Œí¬ ì–´ëŒ‘í„°ì™€ ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ìš© ë°±ì—”ë“œ ë„¤íŠ¸ì›Œí¬ ì–´ëŒ‘í„°ë¥¼ ì„¤ì¹˜í•˜ë©´
- ê° ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ìœ„í•´ ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì¡°ì •í•´ì•¼ í•œë‹¤.
- ì•„ë¬´ ì„¤ì • ì—†ì´ ì •ìƒì ìœ¼ë¡œ í†µì‹ ì´ ë˜ëŠ” ê²½ìš°ë„ ìˆì§€ë§Œ êµ¬ì„±ê³¼ ë™ì‘ ë°©ì‹ì„ ì •í™•íˆ ì´í•´í•˜ê³  í™œì¸í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
- ë‘ ë„¤íŠ¸ì›Œí¬ ì–´ëŒ‘í„° ëª¨ë‘ ë””í´íŠ¸ ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì„œë ‚ã…‡ì„ í•˜ë©´ ì •ìƒì ìœ¼ë¡œ í†µì‹ ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
  - ë‚˜ëŠ” ìœ„ ë§ì´ ì´í•´ê°€ ë˜ì§€ ì•Šì•„ì„œ ì¡°ì‚¬í•´ë³´ë‹ˆ í•˜ë‚˜ì˜ ì„œë²„ì— ë‘ ê°œì˜ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤.
  - ê·¼ë° AWSì˜ ê²½ìš° í•˜ë‚˜ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ì— í¼ë¸”ë¦­ IPì™€ í”„ë¼ì´ë¹— IPê°€ ìˆì–´ì„œ ê·¸ëŸ¬ë©´ ë‘ ê°œì˜ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆëŠ” ê²ƒì´ì§€ ê¶ê¸ˆí–ˆëŠ”ë°
  - ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ëŠ” í•˜ë‚˜ì˜€ë‹¤. ê·¸ëƒ¥ AWS ìƒì—ì„œ ë‘ ê°œë¥¼ ë§Œë“¤ì–´ì„œ ë§¤í•‘í•˜ëŠ” ê±° ê°™ë‹¤.
  - AWSì˜ ê²½ìš°ëŠ” í¼ë¸Œë¦¿ ì„œë¸Œë„·ê³¼ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì´ ìˆê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¡œ ì¶©ë¶„í•œ ê±° ê°™ì€ë°
  - ì±…ì—ì„œëŠ” ì§ì ‘ ì„œë²„ë¥¼ êµ¬ì„±í•˜ëŠ” ê²½ìš°ì¸ ê±° ê°™ë‹¤.
- ë‘ ë„¤íŠ¸ì›Œí¬ ì–´ëŒ‘í„°ëŠ” ëª¨ë‘ ë””í´íŠ¸ ê²Œì´íŠ¸ì›¨ì´ ì„¤ì •ì„ í•˜ë©´ ì •ìƒì ìœ¼ë¡œ í†µì‹ ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ì™¸ë¶€ ê³µì¸ë§ ë„¤íŠ¸ì›Œí¬ì™€ í†µì‹ í•´ì•¼ í•˜ëŠ” í”„ë¡ íŠ¸ì•¤ë“œ ë„¤íŠ¸ì›Œí¬ ìª½ ì–´ëŒ‘í„°ì—ë§Œ ë””í´íŠ¸ ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì„¤ì •
- ë°±ì—”ë“œë¥¼ ì—°ê²°í•˜ëŠ” ì–´ëŒ‘í„°ì—ëŠ” ë³„ë„ë¡œ ì ì ˆí•œ ë¼ìš°íŒ… ì •ë³´ë¥¼ ë°˜ë“œì‹œ ì„¤ì •í•´ì•¼ í•œë‹¤.
### ì„œë²„ì˜ ë¼ìš°íŒ… í…Œì´ë¸”
ì‚´í´ë³¼ í•­ëª©
![image](https://github.com/user-attachments/assets/5f4dba98-7063-44c7-9c63-2d25c0aded60)
- ëª©ì ì§€
- ì„œë¸Œë„·
- ê²Œì´íŠ¸ì›¨ì´ : ì„ íƒëœ ëª©ì ì§€ë¡œ ê°€ê¸° ìœ„í•œ ë„¥ìŠ¤íŠ¸ í™‰, ë¡œì»¬ì´ë©´ ì—°ê²°ë¨ìœ¼ë¡œ í‘œê¸°ëœë‹¤. 
- ì¸í„°í˜ì´ìŠ¤ : ì„œë²„ì˜ ë„¤íŠ¸ì›Œí¬ ì¹´ë“œë¥¼ ë§í•˜ê³  ì–´ë–¤ ë¬¼ë¦¬ì ì¸ ê²½ë¡œë¡œ íŒ¨í‚·ì„ ë‚´ë³´ë‚¼ì§€ ì„¤ì •, ê²Œì´íŠ¸ì›¨ì´ IP ì£¼ì†Œ ëŒ€ì—­ì— ì†í•˜ë¯€ë¡œ ê²Œì´íŠ¸ì›¨ì´ IP ì£¼ì†Œ ëŒ€ë ¥ì´ í¬í•¨ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì •
- ìš°ì„ ìˆœìœ„

#### ë¼ìš°íŒ… í™•ì¸ ë° ê´€ë¦¬
- ì¶œë ¥
 ```
 netstat -r
 Kernel IP routing table
 Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
 default         ip-172-31-0-1.a 0.0.0.0         UG        0 0          0 enX0
 172.17.0.0      0.0.0.0         255.255.0.0     U         0 0          0 docker0
 172.31.0.0      0.0.0.0         255.255.240.0   U         0 0          0 enX0
 ip-172-31-0-1.a 0.0.0.0         255.255.255.255 UH        0 0          0 enX0
 ip-172-31-0-2.a 0.0.0.0         255.255.255.255 UH        0 0          0 enX0
 192.168.122.0   0.0.0.0         255.255.255.0   U         0 0          0 virbr0
 ```
 - Destination: ëª©ì ì§€ ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” IP ì£¼ì†Œ
 - Gateway: íŒ¨í‚·ì´ ì „ë‹¬ë  ë¼ìš°í„°(ê²Œì´íŠ¸ì›¨ì´) IP ì£¼ì†Œ
 - Genmask: ì„œë¸Œë„· ë§ˆìŠ¤í¬ (ë„¤íŠ¸ì›Œí¬ ë²”ìœ„)
 - Flags: ë¼ìš°íŠ¸ ìƒíƒœ ë° íƒ€ì…
 - Iface: í•´ë‹¹ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤
 - defaultëŠ” ëª¨ë“  ëª©ì ì§€ì´ë‹¤. 
- ì„œë²„ì˜ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ê°€ ë‘ ê°œ ì´ìƒìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆë‹¤ë©´ ì–´ë–¤ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•´ íŒ¨í‚·ì„ ì „ì†¡í•  ê²ƒì¸ì§€ ëª…ì‹œ
- ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì¶”ê°€í•˜ëŠ” ì„¤ì •
  ```
  route add {-host | -net} Target[/prefix] [gw Gw] [metric M] [[dev] If]
  ```
  - ìš°ì„ ìˆœìœ„ë¥¼ ë¶€ì—¬í•˜ë©´ ëª©ì ì§€ì— ëŒ€í•œ ê²Œì´íŠ¸ì›¨ì´ë¥¼ ì—‘í‹°ë¸Œ-ìŠ¤íƒ ë°”ì´ í˜•íƒœë¡œ êµ¬ì„±
  - ìš°ì„ ìˆœìœ„ ê°’ì´ ì‘ì„ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ê°€ ë†’ìœ¼ë©° ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ë¼ìš°íŒ… í…Œì´ë¸”ì´ ì•¡í‹°ë¸Œ ìƒíƒœê°€ ë˜ê³ , í¬ë©´ ìš°ì„ ìˆœìœ„ê°€ ë‚®ì•„ ìŠ¤íƒ ë°”ì´ ìƒíƒœê°€ ëœë‹¤.
  - ì•¡í‹°ë¸Œ ê²½ë¡œì— ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë¼ìš°íŒ… í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ê²½ë¡œê°€ ì‚­ì œë˜ì–´ ìŠ¤íƒ ë°”ì´ë¡œ í†µì‹ ì´ í˜ì¼ì˜¤ë²„ëœë‹¤.
- ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ë¼ìš°íŒ… í…Œì´ë¸”ì„ ì‚­ì œí•˜ëŠ” ì„¤ì •
  ```
  route del {-host | -net} Target[/prefix] [gw Gw] [metric M] [[dev] If]
  ```
- ì„œë²„ê°€ ì¬ë¶€íŒ…ë˜ë©´ ì„¤ì •ëœ ë¼ìš°íŒ… ì •ë³´ëŠ” ì‚¬ë¼ì§„ë‹¤. ê·¸ë˜ì„œ ì„œë²„ê°€ ì¬ë¶€íŒ…ë˜ë©´ ì´ˆê¸° ë¼ìš°íŒ… ì„¤ì •ë§Œ ë‚¨ê³  ë¬¸ì œ í•´ê²° ì´ì „ ìƒíƒœê°€ ëœë‹¤. ë”°ë¼ì„œ ì˜êµ¬ì ì¸ ë¼ìš°íŒ… ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.
#### ì˜êµ¬ì ì¸ ë¼ìš°íŒ… ì •ë³´ ì¶”ê°€í•˜ê¸°
```
sudo nano /etc/netplan/50-cloud-init.yaml

network:
  version: 2
  ethernets:
    eth0:
      dhcp4: true
      routes:
        - to: 10.0.0.0/16
          via: 192.168.1.1


sudo netplan apply
```

## 8.3 ë„¤íŠ¸ì›Œí¬ í™•ì¸ì„ ìœ„í•œ ëª…ë ¹ì–´
ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ ì‚´í´ë³¼ ë‹¤ì–‘í•œ ëª…ë ¹ì–´ë¥¼ ì•Œì•„ë³´ì
### ping(Packet InterNet Groper)
- IP ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ íŠ¹ì • ëª©ì ì§€ê¹Œì§€ ë„¤íŠ¸ì›Œí¬ê°€ ì˜ ë™ì‘í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ëª…ë ¹ì–´
- ìƒëŒ€ë°© í˜¸ìŠ¤íŠ¸ê°€ ì˜ ì‚´ì•„ ìˆëŠ”ì§€ í™•ì¸, ë‘ í˜¸ìŠ¤íŠ¸ ê°„ì˜ í†µì‹ ì„ ìœ„í•œ ê²½ë¡œì¸ ë¼ìš°íŒ… ê²½ë¡œê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸
- ICMPë¼ëŠ” ì¸í„°ë„· í”„ë¡œí† ì½œì„ ì‚¬ìš©
- ê¸°ë³¸ ping, ì˜µì…˜ì„ ì‚¬ìš©í•˜ëŠ” í™•ì¥ ping(í˜¹ì€ ì†ŒìŠ¤ ping)
- ëª…ë ¹ì–´ ì˜µì…˜
  - ```-c count``` : ëª‡ ë²ˆ ë³´ë‚´ê³  ì¢…ë£Œí•  ê²ƒì¸ì§€ ì§€ì •
  - ```-i interval``` : íŒ¨í‚·ì„ ë³´ë‚´ëŠ” ì‹œê°„ ê°„ê²©
  - ```-l interface``` : íŒ¨í‚·ì„ ë³´ë‚¼ ë•Œ ì¶œë°œì§€ ì£¼ì†Œë¥¼ ì§€ì •, ì‹¤ì œ IPë¥¼ ì§€ì •í•˜ê±°ë‚˜ ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ì¶œë°œì§€ ì£¼ì†Œê°€ ë³€ê²½ë¨.
  - ```-s packetsize``` : íŒ¨í‚· í¬ê¸°ë¥¼ ì§€ì •. ê¸°ë³¸ ì„¤ì •ì€ 56ë°”ì´íŠ¸
  ```
  ping -c 5 8.8.8.8 -s 100

  PING 8.8.8.8 (8.8.8.8) 100(128) bytes of data.
  108 bytes from 8.8.8.8: icmp_seq=1 ttl=48 time=33.6 ms
  108 bytes from 8.8.8.8: icmp_seq=2 ttl=48 time=33.2 ms
  108 bytes from 8.8.8.8: icmp_seq=3 ttl=48 time=33.2 ms
  108 bytes from 8.8.8.8: icmp_seq=4 ttl=48 time=33.1 ms
  108 bytes from 8.8.8.8: icmp_seq=5 ttl=48 time=33.1 ms

  --- 8.8.8.8 ping statistics ---
  5 packets transmitted, 5 received, 0% packet loss, time 4005ms
  rtt min/avg/max/mdev = 33.111/33.251/33.620/0.188 ms
  ```
### nc(netcat)
- ëª©ì ì§€ ë‹¨ë§ì´ ì˜ ì‚´ì•„ìˆê³  ì¤‘ê°„ ê²½ë¡œì— ë¬¸ì œê°€ ì—†ë”ë¼ë„ ì‹¤ì œ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì„œë¹„ìŠ¤ í¬íŠ¸ê°€ ì •ìƒì¸ì§€ pingë§Œìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ì—†ë‹¤.
- ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ì²´í¬ì—ì„œ pingì—ì„œ ì‚¬ìš©í•˜ëŠ” icmp ë©”ì‹œì§€ê°€ ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ì™¸ë¶€ì— ìœ ì¶œí•  ìˆ˜ ìˆì–´ icmpì™€ tracerouteë¥¼ ì°¨ë‹¨í•˜ëŠ” ê²½ìš°ë„ ë§ë‹¤
- ë„¤ì´ë²„ì˜ ê²½ìš° pingì´ ë§‰í˜€ ìˆë‹¤. (pingì„ ë³´ë‚´ë©´ ì•„ë¬´ëŸ° ì‘ë‹µì´ ì—†ë‹¤)
  ![image](https://github.com/user-attachments/assets/8d840575-3838-488e-aefe-a1543aa905d3)
- ê·¸ëŸ´ ë•Œ ncë¥¼ ì‚¬ìš©í•´ì„œ íŠ¹ì • í¬íŠ¸ë¡œ ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ë³´ë‚´ì§€ëŠ”ì§€ í™•ì¸í•œë‹¤.
  ```
  nc -zv naver.com 80
  Connection to naver.com (223.130.200.219) 80 port [tcp/http] succeeded!
  ```
### traceroute(ë¦¬ëˆ…ìŠ¤)/tracert(ìœˆë„)
- ì¶œë°œì§€ë¶€í„° í†µì‹ í•˜ê±°ë‚˜ ëª©ì ì§€ê¹Œì§€ì˜ ë„¤íŠ¸ì›Œí¬ ê²½ë¡œë¥¼ í™•ì¸í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´
- pingì€ icmp ë©”ì‹œì§€ë¥¼ ì´ìš©í•´ ì¤‘ê°„ ê²½ë¡œì— ë¬¸ì œê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ í™•ì¸í•˜ì§€ë§Œ tracerouteëŠ” ì¤‘ê°„ ê²½ë¡œì˜ ë” ìƒì„¸í•œ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.
- IP í—¤ë”ì˜ TTLí—¤ë”ë¥¼ ì´ìš©í•œë‹¤.
  - TTLì„ 1ë¶€í„° 1ì”© ì¦ê°€ì‹œí‚¤ë©´ì„œ ëª©ì ì§€ ë„ë‹¬í•  ë•Œê¹Œì§€ íŒ¨í‚·ì„ ë°˜ë³µì ìœ¼ë¡œ ì „ì†¡í•˜ë©´ì„œ ê²½ë¡œ ì¶”ì 
  - ì¸í„°ë„· êµ¬ê°„ì—ì„œ ê²½ë¡œë¥¼ ì°¾ì§€ ëª»í•˜ëŠ” ê²½ìš° ë¬´ì œí•œì ìœ¼ë¡œ ëŒì•„ë‹¤ë‹ˆì§€ ì•Šë„ë¡ IP í—¤ë”ì— ì‚´ì•„ìˆì„ ìˆ˜ ìˆëŠ” í•œê³„ë¥¼ ëª…ì‹œí•˜ëŠ”ë° ê·¸ê²ƒì´ TTL
  - ë¼ìš°í„° ì¥ë¹„ë¥¼ ì§€ë‚  ë•Œë§ˆë‹¤ 1ì”© ê°ì†Œ, 0ì´ ë˜ëŠ” ìˆœê°„ í•´ë‹¹ íŒ¨í‚·ì„ ë“œë¡­ì‹œí‚¤ê³  icmp ë©”ì‹œì§€ë¥¼ ì´ìš©í•´ì„œ ì¶œë°œì§€ ë‹¨ë§ì— íŒ¨í‚·ì„ ë“œë¡­í•œ ì´ìœ ë¥¼ ì•Œë ¤ì¤€ë‹¤
  - TTLì´ 1ì¼ ë•ŒëŠ” 1í™‰ê¹Œì§€ì˜ ì¥ë¹„ë¡œ ì „ë‹¬, 0ìœ¼ë¡œ ë§Œë£Œë˜ë©´ì„œ í•´ë‹¹ ì¥ë¹„ëŠ” ICMP time exceed ë©”ì‹œì§€ë¥¼ ì¶œë°œì§€ë¡œ ì „ë‹¬
  - 3ê³„ì¸µ ì •ë³´ì— ì˜í•œ ì¶”ì ì´ë¯€ë¡œ 2ê³„ì¸µ ì´í•˜ì˜ ì¥ë¹„ ì¶”ì ì€ ë¶ˆê°€ëŠ¥
- ë‘ í˜¸ìŠ¤íŠ¸ ê°„ ì •ìƒì ì¸ ê²½ë¡œì¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ë‘ í˜¸ìŠ¤íŠ¸ ëª¨ë‘ ê°ê° tracerouteë¥¼ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.
  ![image](https://github.com/user-attachments/assets/e1f2c776-c9ed-423c-9d8b-18b25fdf06d8)
  ì¤‘ê°„ì— ë³´ì•ˆì¥ë¹„ê°€ ìˆê³  í•˜ë‚˜ì˜ ë‹¨ë§ì— ì¸í„°í˜ì´ìŠ¤ê°€ 2ê°œì¸ ê²½ìš° ë“¤ì˜¤ì–´ëŠ” ì¸í„°í˜ì´ìŠ¤ì™€ ë‚˜ê°€ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ë‹¤ë¥´ë©´ ìœ„ì™€ ê°™ì€ ìƒí™©ì´ ë²Œì–´ì§„ë‹¤.
- ëª…ë ¹ì–´
  - ```-I, --icmp``` : icmp ê¸°ë°˜ìœ¼ë¡œ tracerouteìˆ˜í–‰
  - ```-T, --tcp``` : tcpê¸°ë°˜ìœ¼ë¡œ traceroute ìˆ˜í–‰, ê¸°ë³¸ í¬íŠ¸ 80
  - ```-n``` : ip ì£¼ì†Œë¥¼ ë„ë©”ì¸ì´ ì•„ë‹Œ ìˆ«ì í˜•ì‹ìœ¼ë¡œ í‘œì‹œ(ë„ë©”ì¸ ë¦¬ì¡¸ë¸Œ ë¯¸ìˆ˜í–‰)
  - ```-p port, --port=port``` : íŠ¹ì • í¬íŠ¸ë¥¼ ì§€ì •í•´ traceroute ìˆ˜í–‰
  - ```-s src_address, --source-src_address``` : íŒ¨í‚·ì´ ë‚˜ê°€ëŠ” ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ ë³„ë„ IPë¡œ ì¶œë°œì§€ ì§€ì •

### tcptraceroute
- ê²½ë¡œ ì¶”ì  + í•´ë‹¹ ì„œë¹„ìŠ¤ í¬íŠ¸ê°€ ì˜¤í”ˆë˜ì–´ì ¸ ìˆëŠ”ì§€ + ì¤‘ê°„ê²½ë¡œ ì°¨ë‹¨/ìµœì¢… ëª©ì ì§€ ì°¨ë‹¨ ë“±ì˜ ì •ë³´
![image](https://github.com/user-attachments/assets/d3af3be3-1fd4-4cac-8fb6-8d891559c074)

### netstat
- ì„œë²„ì˜ ë‹¤ì–‘í•œ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
- ì˜µì…˜
  - ```-a, --all``` : ëª¨ë“  ì—°ê²°ê³¼ ìˆ˜ì‹  ëŒ€ê¸° í¬íŠ¸ í‘œì‹œ
  - ```-n, --numeric``` : ì£¼ì†Œì™€ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ìˆ«ì í˜•ì‹ìœ¼ë¡œ í‘œì‹œ
  - ```-r, --route``` : ë¼ìš°íŒ… í…Œì´ë¸” í‘œì‹œ
  - ```-i, --interfaces``` : ì¸í„°í˜ì´ìŠ¤ë³„ ì…ì¶œë ¥ íŒ¨í‚· í†µê³„
  - ```-s, --statics``` : ë„¤íŠ¸ì›Œí¬ì— í†µê³„ ë°ì´í„° ì¶œë ¥
  - ```-p, --programs``` : pid, í”„ë¡œê·¸ë¨ ì´ë¦„
![image](https://github.com/user-attachments/assets/2591237e-85a2-4972-97ec-b07ef9b3194e)

### ss(socker statics)
- ì†Œì¼“ ì •ë³´
- netstat ëŒ€ì²´ + ë‹¤ì–‘í•œ ì˜µì…˜ ì œê³µ + ì»¤ë„ ìŠ¤í˜ì´ìŠ¤ë¥¼ í†µí•´ ì§ì ‘ ê°€ì ¸ì™€ ë” ë¹ ë¦„
- ì˜µì…˜
  - ```-a```: ì „ì²´
  - ```-l``` : LIsteningìƒíƒœ ì†Œì¼“ë§Œ
  - ```-i``` : ìì„¸í•œ
  - ```-p``` : ì‚¬ìš©ì¤‘
  - ```-n``` : ì„œë¹„ìŠ¤ ëª…ì´ ì•„ë‹Œ ì‹¤ì œí¬íŠ¸
  - ```-4, -6``` : IPv4, IPv6
  - ```-s``` : í¬ë¡œí† ì½œë³„ í†µê³„
  - ```-t, -u``` : tcp, udp
  - ss -it4 state connected
### nslookup(name server lookup)
- DNSì— ë‹¤ì–‘í•œ ë„ë©”ì¸ ê´€ë ¨ ë‚´ìš©ì„ ì§ˆì˜í•´ ê²°ê´ê°’ì„ ì „ì†¡ë°›ì„ ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ëª…ë ¹ì–´
- íŠ¹ì • ë„ë©”ì¸ì— ë§¤í•‘ëœ IP ì£¼ì†Œë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©
- ìš´ì˜ì²´ì œì— ì„¤ì •í–ˆë˜ ë„¤íŠ¸ì›Œí¬ ì„¤ì • ì •ë³´ë¥¼ ì´ìš©í•´ DNS ì„œë²„ ì£¼ì†Œë¡œ ì§ˆì˜ë¥¼ ë³´ë‚´ì§€ë§Œ ì˜µì…˜ì„ í†µí•´ì„œ í•´ë‹¹ ì„œë²„ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
  - SK: 219.250.36.120, 210.220.163.82
  - KT : 168.126.63.1, 168.126.63.2
  - LG : 164.124.101.2, 203.248.252.2
  - GOOGLE : 8.8.8.8, 4.4.4.4
- ì§ˆì˜
  ```
  nslookup [ì˜µì…˜] # ê¸°ë³¸ë„¤ì„ì„œë²„ë¥¼ ì‚¬ìš©í•œ ëŒ€í™”í˜• ëª¨ë“œ
  nslookup [ì˜µì…˜] - server # ê¸°ë³¸ ë„¤ì„ ì„œë²„ë¥¼ serverë¡œ ì§€ì •í•œ ëŒ€í™”í˜• ëª¨ë“œ
  nslookup [ì˜µì…˜] host # ê¸°ë³¸ ì—ì„ ì„œë²„ë¥¼ ì‚¬ìš©í•œ í˜¸ìŠ¤íŠ¸ ì§ˆì˜
  nslookup [ì˜µì…˜] host server # ê¸°ë³¸ ë„¤ì„ ì„œë²„ë¥¼ serverë¡œ ì§€ì •í•œ host ì§ˆì˜
  ```
  ```
  nslookup 
  > google.com
  Server:         127.0.0.53
  Address:        127.0.0.53#53

  Non-authoritative answer:
  Name:   google.com
  Address: 172.217.25.174
  Name:   google.com
  Address: 2404:6800:400a:80e::200e
  ```
  ```
  nslookup - 8.8.8.8
  > naver.com
  Server:         8.8.8.8
  Address:        8.8.8.8#53

  Non-authoritative answer:
  Name:   naver.com
  Address: 223.130.192.248
  Name:   naver.com
  Address: 223.130.200.219
  Name:   naver.com
  Address: 223.130.192.247
  Name:   naver.com
  Address: 223.130.200.236
  ```
  ```
  nslookup naver.com
  Server:         127.0.0.53
  Address:        127.0.0.53#53

  Non-authoritative answer:
  Name:   naver.com
  Address: 223.130.192.247
  Name:   naver.com
  Address: 223.130.192.248
  Name:   naver.com
  Address: 223.130.200.219
  Name:   naver.com
  Address: 223.130.200.236
  ```
  ```
  nslookup naver.com 8.8.8.8
  Server:         8.8.8.8
  Address:        8.8.8.8#53

  Non-authoritative answer:
  Name:   naver.com
  Address: 223.130.200.219
  Name:   naver.com
  Address: 223.130.200.236
  Name:   naver.com
  Address: 223.130.192.248
  Name:   naver.com
  Address: 223.130.192.247
  ```







